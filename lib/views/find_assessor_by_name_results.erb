<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <a
      href="<%= localised_url('/find-an-assessor')%>"
      class="govuk-back-link">
      <%=t('layout.body.breadcrumb.back')%>
    </a>

    <h1 class="govuk-heading-xl">
      <%= t('find_assessor_by_name.top_heading') %>
    </h1>

    <form method="GET" action="<%=localised_url('/find-an-assessor/search-by-name')%>" >
      <% if I18n.locale != I18n.available_locales[0] %>
        <input type="hidden" name="lang" value="<%= I18n.locale.to_s %>">
      <% end %>
      <fieldset class="govuk-fieldset fieldset-background">
        <div class="govuk-form-group<% if errors[:name] %> govuk-form-group--error<% end %>">
          <label class="govuk-label" for="name">
            <%= t('find_assessor_by_name.question') %>
          </label>
          <span id="name-hint" class="govuk-hint">
            <%= t('find_assessor_by_name.hint') %>
          </span>
          <% if errors[:name] %>
          <span id="name-error" class="govuk-error-message">
            <span class="govuk-visually-hidden">Error:</span><%= errors[:name] %>
          </span>
          <% end %>
          <input id="name" name="name" type="text"
                 class="govuk-input<% if errors[:name] %> govuk-input--error<% end %>"
                 aria-describedby="name-hint<% if errors[:name] %> name-error<% end %>"
                 autocomplete="postal-code"
                 spellcheck="false"
                 <% if params['name'] %>value="<%= params['name'] %>"<% end %>
          >
        </div>

        <button class="govuk-button" data-module="govuk-button"><%= t('find_assessor_by_name.button_text') %></button>
      </fieldset>
    </form>

    <div class="govuk-grid-row">
      <p class="govuk-body">
        <%= t('find_assessor_by_name_results.description') %>
      </p>
    </div>

    <details class="govuk-details" data-module="govuk-details">
      <summary class="govuk-details__summary">
        <span class="govuk-details__summary-text">
          <%= t('find_assessor_by_name_results.accreditation_summary_title') %>
        </span>
      </summary>
      <div class="govuk-details__text">
        <%= t('find_assessor_by_name_results.accreditation_summary_text') %>
        <ul>
          <li><%= t('find_assessor_by_name_results.accreditation_summary_assess') %></li>
          <li><%= t('find_assessor_by_name_results.accreditation_summary_create') %></li>
        </ul>
      </div>
    </details>

    <h2 class="govuk-heading-m"><%= t((results[:looseMatch] ? 'find_assessor_by_name_results.results.results_like' : 'find_assessor_by_name_results.results.results'), :quantity=>results[:results].length, :name=>params['name']) %></h2>
    <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

    <% if results[:results].size > 0 %>
      <ul class="govuk-list">
        <% results[:results].each do |result| %>
          <%== erb :find_assessor_list_assessor, locals: {
              assessor: result } %>
      </ul>
    <% end %>
    <% else %>
      <p class="govuk-body">
        <%= t('find_assessor_by_name_results.no_assessors') %>
      </p>
    <% end %>
  </div>
</div>
