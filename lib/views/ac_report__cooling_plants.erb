<div class="epc-blue-bottom cooling plants">
  <h2 class="govuk-heading-l">
    <%= t('ac_report.sections.cooling_plants.title') %>
  </h2>

  <% cooling_plants.each do |cooling_plant| %>
    <h3 class="govuk-heading-m"><%= t('ac_report.sections.cooling_plants.cooling_plant.title') %></h3>
    <%== erb :component__summary_list, locals: {
      list: {
        system_number: cooling_plant[:systemNumber],
        identifier: cooling_plant[:identifier],
      },
      translation_prefix: 'ac_report.sections.cooling_plants.cooling_plant.details.',
      skip_null: true
    } %>

    <h4 class="govuk-heading-s"><%= t('ac_report.sections.cooling_plants.cooling_plant.equipment.title') %></h4>
    <%== erb :component__summary_list, locals: {
      list: {
        cooling_capacity: cooling_plant[:equipment][:coolingCapacity],
        description: cooling_plant[:equipment][:description],
        location: cooling_plant[:equipment][:location],
        manufacturer: cooling_plant[:equipment][:manufacturer],
        model_reference: cooling_plant[:equipment][:modelReference],
        refrigerant_charge: cooling_plant[:equipment][:refrigerantCharge],
        refrigerant_type: cooling_plant[:equipment][:refrigerantType][:type],
        serial_number: cooling_plant[:equipment][:serialNumber],
        year_installed: cooling_plant[:equipment][:yearInstalled],
        area_served: cooling_plant[:equipment][:areaServed],
        discrepancy_note: cooling_plant[:equipment][:discrepancyNote],
      },
      translation_prefix: 'ac_report.sections.cooling_plants.cooling_plant.equipment.details.',
      skip_null: true
    } %>
    <% unless cooling_plant[:equipment][:discrepancyNote].nil? %>
      <h5 class="govuk-heading-s"><%= t('ac_report.sections.cooling_plants.cooling_plant.equipment.details.discrepancy_note') %></h5>
      <p class="govuk-body"><%= cooling_plant[:equipment][:discrepancyNote] %></p>
    <% end %>

    <% skip_negative = true %>
    <h4 class="govuk-heading-s"><%= t('ac_report.sections.cooling_plants.cooling_plant.inspection.positive_title') %></h4>
    <% cooling_plant[:inspection].each do |inspection_key, inspection_data| %>
      <% if inspection_data[:state] != true %>
        <% skip_negative = false %>
        <% next %>
      <% end %>
      <h5 class="govuk-heading-s govuk-!-margin-bottom-0"><%= t('ac_report.sections.cooling_plants.cooling_plant.inspection.' + inspection_key.to_s) %></h5>
      <% unless inspection_data[:note].nil? %>
        <p class="govuk-body"><%= inspection_data[:note] %></p>
      <% end %>
    <% end %>

    <% unless skip_negative %>
      <h4 class="govuk-heading-s"><%= t('ac_report.sections.cooling_plants.cooling_plant.inspection.negative_title') %></h4>
      <% cooling_plant[:inspection].each do |inspection_key, inspection_data| %>
        <% next if inspection_data[:state] != false %>
        <h5 class="govuk-heading-s govuk-!-margin-bottom-0"><%= t('ac_report.sections.cooling_plants.cooling_plant.inspection.' + inspection_key.to_s) %></h5>
        <% unless inspection_data[:note].nil? %>
          <p class="govuk-body"><%= inspection_data[:note] %></p>
        <% end %>
      <% end %>
    <% end %>

    <h4 class="govuk-heading-s"><%= t('ac_report.sections.cooling_plants.cooling_plant.sizing.title') %></h4>
    <%== erb :component__summary_list, locals: {
      list: {
        installed_capacity: cooling_plant[:sizing][:installedCapacity],
        occupant_density: cooling_plant[:sizing][:occupantDensity],
        total_floor_area: cooling_plant[:sizing][:totalFloorArea],
        total_occupants: cooling_plant[:sizing][:totalOccupants],
        upper_heat_gain: cooling_plant[:sizing][:upperHeatGain],
        acceptable_installed_size: t('ac_report.sections.cooling_plants.cooling_plant.sizing.details.acceptable_installed_size_section.' + cooling_plant[:sizing][:acceptableInstalledSize].to_s),
      },
      translation_prefix: 'ac_report.sections.cooling_plants.cooling_plant.sizing.details.',
      skip_null: true
    } %>

    <h5 class="govuk-heading-s"><%= t('ac_report.sections.cooling_plants.cooling_plant.sizing.recommendation_title') %></h5>
    <% cooling_plant[:sizing][:guidance].each do |guidance| %>
      <% next if guidance[:text].nil? %>
      <p class="govuk-body"><%= guidance[:text] %></p>
    <% end %>
  <% end %>
</div>
