<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <div class="govuk-body epc-blue-bottom">
      <a
        href="<%= localised_url('/find-a-certificate')%>"
        class="govuk-back-link">
        <%=t('layout.body.breadcrumb.back')%>
      </a>

      <h1 class="govuk-heading-xl">
        <%= t('domestic_epc.top_heading') %>
      </h1>

      <div class="epc-box">
        <div class="epc-rating-box">
          <p class="epc-rating-title govuk-body">
            <%= t('domestic_epc.box.energy_rating_title') %>
          </p>
          <p class="epc-rating-result govuk-body">
            <%= assessment[:currentEnergyEfficiencyBand].upcase %>
          </p>
        </div>
        <p class="epc-address govuk-body">
          <%== [assessment[:addressLine1], assessment[:addressLine2], assessment[:addressLine3], assessment[:addressLine4]].reject(&:empty?).join('<br />') %><br>
          <%= assessment[:town] %><br />
          <%= assessment[:postcode] %>
        </p>
        <p class="govuk-body epc-extra-box">
          <% puts('Oh!') %>
          <%= t('domestic_epc.box.date_of_expiry', :date_of_expiry => Date.parse(assessment[:dateOfExpiry]).strftime('%d %m %Y')) %>
        </p>
        <p class="govuk-body epc-extra-box">
          <label><%= t('domestic_epc.box.certificate_id') %></label>
          <b><%= assessment[:assessmentId] %></b>
        </p>
      </div>
    </div>
  </div>

  <div class="govuk-grid-column-two-thirds">
    <div class="govuk-body epc-blue-bottom">
      <h2 class="govuk-heading-l">Renting this property</h2>

      <% if assessment[:currentEnergyEfficiencyBand] > 'e' %>
        <div class="govuk-warning-text">
          <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
          <div class="govuk-warning-text__text">
            <span class="govuk-warning-text__assistive">Warning</span>
            <div class="epc-rating-box">
              <p class="epc-rating-title govuk-body">
                <%= t('domestic_epc.landlord_warning.energy_rating_title') %>
              </p>
              <p class="epc-rating-result govuk-body">
                <%= assessment[:currentEnergyEfficiencyBand].upcase %>
              </p>
            </div>
            <h2 class="govuk-error-summary__title" id="error-summary-title">
              <%= t('domestic_epc.landlord_warning.title') %>
            </h2>
            <div class="govuk-error-summary__body">
              <p class="govuk-body">
                <%= t('domestic_epc.landlord_warning.body.text', :link => '<a href="' + t('domestic_epc.landlord_warning.body.url') + '">' + t('domestic_epc.landlord_warning.body.cta') + '</a>') %>
              </p>
            </div>
          </div>
        </div>
      <% end %>

      <div class="epc-box-clear"></div>

      <p class="govuk-body">
        The Regulations mean that, since 1 April 2018, private landlords may not let domestic properties
        on new tendencies to new or existing tenants of the Energy Efficiency Certificate (EPC) rating is F or G
        (unless an exemption applies).
      </p>
      <p class="govuk-body">
        From 1 April 2020 the prohibition on letting F and G properties will extend to all relevant properties, even
        when there has been no change in tenancy.
      </p>
      <p class="govuk-body">
        Regulations available at <a href="https://www.gov.uk/guidance/domestic-private-rented-property-minimum-energy-efficiency-standard-landlord-guidance">https://www.gov.uk/guidance/domestic-private-rented-property-minimum-energy-efficiency-standard-landlord-guidance</a>
      </p>
    </div>
  </div>

  <div class="govuk-grid-column-two-thirds">
    <div class="govuk-body epc-blue-bottom">
      <%== erb :energy_rating, locals: {
        current_energy_efficiency_rating: assessment[:currentEnergyEfficiencyRating],
        potential_energy_efficiency_rating: assessment[:potentialEnergyEfficiencyRating],
        current_energy_efficiency_band: assessment[:currentEnergyEfficiencyBand],
        potential_energy_efficiency_band: assessment[:potentialEnergyEfficiencyBand] } %>

      <dl class="govuk-summary-list">
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key govuk-!-font-weight-regular">
            <%= t('domestic_epc.labels.certificate_number') %>
          </dt>
          <dd class="govuk-summary-list__value govuk-!-font-weight-bold">
            <%= assessment[:assessmentId] %>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key govuk-!-font-weight-regular">
            <%= t('domestic_epc.labels.type_of_assessment') %>
          </dt>
          <dd class="govuk-summary-list__value govuk-!-font-weight-bold">
            <%= assessment[:typeOfAssessment] %>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key govuk-!-font-weight-regular">
            <%= t('domestic_epc.labels.date_of_assessment') %>
          </dt>
          <dd class="govuk-summary-list__value govuk-!-font-weight-bold">
            <%= assessment[:dateOfAssessment] %>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key govuk-!-font-weight-regular">
            <%= t('domestic_epc.labels.date_of_certificate') %>
          </dt>
          <dd class="govuk-summary-list__value govuk-!-font-weight-bold">
            <%= assessment[:dateRegistered] %>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key govuk-!-font-weight-regular">
            <%= t('domestic_epc.labels.total_floor_area') %>
          </dt>
          <dd class="govuk-summary-list__value govuk-!-font-weight-bold">
            <%= assessment[:totalFloorArea] %> m<sup>2</sup>
          </dd>
        </div>
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key govuk-!-font-weight-regular">
            <%= t('domestic_epc.labels.dwelling_type') %>
          </dt>
          <dd class="govuk-summary-list__value govuk-!-font-weight-bold">
            <%= assessment[:dwellingType] %>
          </dd>
        </div>
      </dl>
    </div>
  </div>

  <div class="govuk-grid-column-two-thirds">
    <div class="govuk-body epc-blue-bottom">
      <h2 class="govuk-heading-l">How this certificate was produced</h2>
      <p class="govuk-body">This document has been produced following an energy assessment undertaken by a qualified Energy Assessor, accredited by <%= assessment[:assessor][:registeredBy][:name] %>.</p>

      <h3 class="govuk-heading-m">Assessor and accreditation scheme details</h3>
      <dl class="govuk-summary-list">
        <div class="govuk-summary-list__row" id="accreditation_id">
          <dt class="govuk-summary-list__key govuk-!-width-one-half govuk-!-font-weight-regular">Assessor's accreditation number</dt>
          <dd class="govuk-summary-list__value govuk-!-font-weight-bold"><%= assessment[:assessor][:schemeAssessorId] %></dd>
        </div>
        <div class="govuk-summary-list__row" id="Accreditation_scheme">
          <dt class="govuk-summary-list__key govuk-!-width-one-half govuk-!-font-weight-regular">Accreditation scheme</dt>
          <dd class="govuk-summary-list__value govuk-!-font-weight-bold"><%= assessment[:assessor][:registeredBy][:name] %></dd>
        </div>
        <div class="govuk-summary-list__row" id="name">
          <dt class="govuk-summary-list__key govuk-!-width-one-half govuk-!-font-weight-regular">Assessor's name</dt>
          <dd class="govuk-summary-list__value govuk-!-font-weight-bold"><%= assessment[:assessor][:firstName] %> <%= assessment[:assessor][:lastName] %></dd>
        </div>
        <% if assessment[:assessor][:contactDetails].key?(:telephoneNumber) && !assessment[:assessor][:contactDetails][:telephoneNumber].empty? %>
        <div class="govuk-summary-list__row" id="phone">
          <dt class="govuk-summary-list__key govuk-!-width-one-half govuk-!-font-weight-regular">Phone number</dt>
          <dd class="govuk-summary-list__value govuk-!-font-weight-bold"><%= assessment[:assessor][:contactDetails][:telephoneNumber] %></dd>
        </div>
        <% end %>
        <% if assessment[:assessor][:contactDetails].key?(:email) && !assessment[:assessor][:contactDetails][:email].empty? %>
        <div class="govuk-summary-list__row" id="email">
          <dt class="govuk-summary-list__key govuk-!-width-one-half govuk-!-font-weight-regular">E-mail address</dt>
          <dd class="govuk-summary-list__value govuk-!-font-weight-bold"><a href="mailto:"><%= assessment[:assessor][:contactDetails][:email] %></a></dd>
        </div>
        <% end %>
      </dl>
    </div>
  </div>
</div>
